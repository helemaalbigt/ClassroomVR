<html>
  <head>
    <script src="https://aframe.io/releases/0.3.0/aframe.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/1.4.5/socket.io.min.js"></script>
    <script src="easyrtc/easyrtc.js"></script>
    <script src="https://unpkg.com/networked-aframe/dist/networked-aframe.min.js"></script>
    <script src="js/gun.component.js"></script>
  </head>
  <body>
    <a-scene networked-scene="app: classroomVR; room: room1; debug: true; webrtc: true; webrtcAudio: true">

        <a-assets>
          <img id="floor" src="https://img.gs/bbdkhfbzkk/stretch/https://i.imgur.com/25P1geh.png" crossorigin="anonymous">
          <img id="sky" src="./img/BG_dark.jpg" crossorigin="anonymous" />

<script>
      // Define custom schema for syncing objects components
      var objectSchema = {
        template: '#object-template',
        components: [
          'position',
          'rotation',
          'scale',
          {
            selector: '.test',
            component: 'material'
          }
        ]
      };
      NAF.schemas.add(objectSchema);
    </script>

          <script id="object-template" type="text/html">
          <a-entity class="test">
             </a-entity></script>


          <script id="avatar-template" type="text/html">
            <a-entity class="avatar">
              <a-sphere class="head"
                color="#5985ff"
                scale="0.45 0.5 0.4"
              ></a-sphere>
              <a-entity class="face"
                position="0 0.05 0"
              >
                <a-sphere class="eye"
                  color="#efefef"
                  position="0.16 0.1 -0.35"
                  scale="0.12 0.12 0.12"
                >
                  <a-sphere class="pupil"
                    color="#000"
                    position="0 0 -1"
                    scale="0.2 0.2 0.2"
                  ></a-sphere>
                </a-sphere>
                <a-sphere class="eye"
                  color="#efefef"
                  position="-0.16 0.1 -0.35"
                  scale="0.12 0.12 0.12"
                >
                  <a-sphere class="pupil"
                    color="#000"
                    position="0 0 -1"
                    scale="0.2 0.2 0.2"
                  ></a-sphere>
                </a-sphere>
              </a-entity>
            </a-entity>
          </script>

        </a-assets>

        <a-entity id="tP00" networked="template:#object-template; showLocalTemplate:false;" geometry="primitive: sphere" material="color: red" position="-3 8 5"></a-entity>
        <a-entity id="tP01" networked="template:#object-template; showLocalTemplate:false;" geometry="primitive: sphere" material="color: red" position="-8 6 13"></a-entity>
        <a-entity id="tP02" networked="template:#object-template; showLocalTemplate:false;" geometry="primitive: sphere" material="color: red" position="-2 4 11"></a-entity>
        <a-entity id="tP03" networked="template:#object-template; showLocalTemplate:false;" geometry="primitive: sphere" material="color: red" position="5 3 9"></a-entity>
        <a-entity id="tP04" networked="template:#object-template; showLocalTemplate:false;" geometry="primitive: sphere" material="color: red" position="-1 2 3"></a-entity>
        <a-entity id="tP05" networked="template:#object-template; showLocalTemplate:false;" geometry="primitive: sphere" material="color: red" position="2 2 -3"></a-entity>

        <a-entity id="player" networked="template:#avatar-template;showLocalTemplate:false;" camera position="0 1.3 0" wasd-controls look-controls> 
        <a-entity cursor="fuse: false; fuseTimeout: 500"
            position="0 0 -1"
            geometry="primitive: ring; radiusInner: 0.01; radiusOuter: 0.02"
            material="color: white; shader: flat">
        </a-entity>
        </a-entity>
        <a-sky src="#sky" rotation="0 -90 0"></a-sky>

    </a-scene>

    <script>
        window.onkeyup = function (e) {
            var key = e.keyCode ? e.keyCode : e.which;

            if (key == 38) {
                console.log("turn mic on");
            } else if (key == 40) {
                console.log("turn mic off");
            }
        }


    </script>
    <script src="./js/vip.js"></script>
  </body>
</html>